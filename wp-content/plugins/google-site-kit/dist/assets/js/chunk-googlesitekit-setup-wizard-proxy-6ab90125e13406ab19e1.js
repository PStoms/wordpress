(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{217:function(e,t,i){"use strict";(function(e){var n=i(20),o=i.n(n),a=i(5),s=i.n(a),c=i(6),l=i.n(c),r=i(7),u=i.n(r),d=i(8),g=i.n(d),m=i(15),h=i.n(m),p=i(9),k=i.n(p),f=i(3),b=i.n(f),_=i(14),v=i.n(_),y=i(41),O=i(1),S=i(0),E=i(2),R=i(218),x=i(45),j=function(t){function OptIn(e){var t;return s()(this,OptIn),(t=u()(this,g()(OptIn).call(this,e))).state={optIn:Object(x.a)(),error:!1},t.handleOptIn=t.handleOptIn.bind(h()(t)),t}return k()(OptIn,t),l()(OptIn,[{key:"handleOptIn",value:function(e){var t=this,i=!!e.target.checked,n=Object(E.k)("googlesitekit_tracking_optin");Object(x.b)(i),i&&Object(x.c)("tracking_plugin",this.props.optinAction),Object(y.default)({path:"/wp/v2/users/me",method:"POST",data:{meta:o()({},n,i)}}).then((function(){t.setState({optIn:i,error:!1})})).catch((function(e){t.setState({optIn:!i,error:{errorCode:e.code,errorMsg:e.message}})}))}},{key:"render",value:function(){var t=this.state,i=t.optIn,n=t.error,o=this.props,a=o.id,s=o.name,c=o.className,l=Object(S.sprintf)(
/* translators: %s: privacy policy URL */
Object(S.__)('Help us improve the Site Kit plugin by allowing tracking of anonymous usage stats. All data are treated in accordance with <a href="%s" target="_blank" rel="noopener noreferrer">Google Privacy Policy</a>',"google-site-kit"),"https://policies.google.com/privacy");return e.createElement("div",{className:v()("googlesitekit-opt-in",c)},e.createElement(R.a,{id:a,name:s,value:"1",checked:i,onChange:this.handleOptIn},e.createElement("span",{dangerouslySetInnerHTML:Object(E.x)(l,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href","target","rel"]})})),n&&e.createElement("div",{className:"googlesitekit-error-text"},n.errorMsg))}}]),OptIn}(O.Component);j.propTypes={id:b.a.string,name:b.a.string,className:b.a.string,optinAction:b.a.string},j.defaultProps={id:"googlesitekit-opt-in",name:"optIn"},t.a=j}).call(this,i(1))},218:function(e,t,i){"use strict";(function(e){var n=i(5),o=i.n(n),a=i(6),s=i.n(a),c=i(7),l=i.n(c),r=i(8),u=i.n(r),d=i(9),g=i.n(d),m=i(3),h=i.n(m),p=i(14),k=i.n(p),f=i(1),b=i(25),_=function(t){function Checkbox(e){var t;return o()(this,Checkbox),(t=l()(this,u()(Checkbox).call(this,e))).formFieldRef=Object(f.createRef)(),t.checkboxRef=Object(f.createRef)(),t}return g()(Checkbox,t),s()(Checkbox,[{key:"componentDidMount",value:function(){new b.e(this.formFieldRef.current).input=new b.c(this.checkboxRef.current)}},{key:"render",value:function(){var t=this.props,i=t.onChange,n=t.id,o=t.name,a=t.value,s=t.checked,c=t.disabled,l=t.children;return e.createElement("div",{className:"mdc-form-field",ref:this.formFieldRef},e.createElement("div",{className:k()("mdc-checkbox",{"mdc-checkbox--disabled":c}),ref:this.checkboxRef},e.createElement("input",{className:"mdc-checkbox__native-control",type:"checkbox",id:n,name:o,value:a,checked:s,disabled:c,onChange:i}),e.createElement("div",{className:"mdc-checkbox__background"},e.createElement("svg",{className:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},e.createElement("path",{className:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),e.createElement("div",{className:"mdc-checkbox__mixedmark"}))),e.createElement("label",{htmlFor:n},l))}}]),Checkbox}(f.Component);_.propTypes={onChange:h.a.func.isRequired,id:h.a.string.isRequired,name:h.a.string.isRequired,value:h.a.string.isRequired,checked:h.a.bool,disabled:h.a.bool,children:h.a.node.isRequired},_.defaultProps={checked:!1,disabled:!1},t.a=_}).call(this,i(1))},255:function(e,t,i){"use strict";(function(e,n){i.d(t,"a",(function(){return x}));var o=i(11),a=i.n(o),s=i(5),c=i.n(s),l=i(6),r=i.n(l),u=i(7),d=i.n(u),g=i(8),m=i.n(g),h=i(15),p=i.n(h),k=i(9),f=i.n(k),b=i(0),_=i(1),v=i(42),y=i(2),O=i(10),S=i(108),E=i(18),R=i(119),x=function(t){function ResetButton(t){var i;c()(this,ResetButton),i=d()(this,m()(ResetButton).call(this,t));var n=e._googlesitekitBaseData.splashURL;return i.state={dialogActive:!1,postResetURL:Object(v.a)(n,{notification:"reset_success"})},i.handleDialog=i.handleDialog.bind(p()(i)),i.handleUnlinkConfirm=i.handleUnlinkConfirm.bind(p()(i)),i.handleCloseModal=i.handleCloseModal.bind(p()(i)),i}return f()(ResetButton,t),r()(ResetButton,[{key:"componentDidMount",value:function(){e.addEventListener("keyup",this.handleCloseModal,!1)}},{key:"componentWillUnmount",value:function(){e.removeEventListener("keyup",this.handleCloseModal)}},{key:"handleUnlinkConfirm",value:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(O.c.set(O.a,"site","reset"));case 2:Object(y.c)(),this.handleDialog(),document.location=this.state.postResetURL;case 5:case"end":return e.stop()}}),null,this)}},{key:"handleCloseModal",value:function(e){27===e.keyCode&&this.setState({dialogActive:!1})}},{key:"handleDialog",value:function(){this.setState((function(e){return{dialogActive:!e.dialogActive}}))}},{key:"render",value:function(){var e=this,t=this.props.children,i=this.state.dialogActive;return n.createElement(_.Fragment,null,n.createElement(E.a,{className:"googlesitekit-reset-button",onClick:function(){return e.setState({dialogActive:!0})},inherit:!0},t||Object(b.__)("Reset Site Kit","google-site-kit")),n.createElement(R.a,null,n.createElement(S.a,{dialogActive:i,handleConfirm:this.handleUnlinkConfirm,handleDialog:this.handleDialog,title:Object(b.__)("Reset Site Kit","google-site-kit"),subtitle:Object(b.__)("Resetting this site will remove access to all services. After disconnecting, you will need to re-authorize your access to restore service.","google-site-kit"),confirmButton:Object(b.__)("Reset","google-site-kit"),provides:[]})))}}]),ResetButton}(_.Component)}).call(this,i(16),i(1))},362:function(e,t,i){"use strict";i.r(t),function(e,n){var o=i(5),a=i.n(o),s=i(6),c=i.n(s),l=i(7),r=i.n(l),u=i(8),d=i.n(u),g=i(9),m=i.n(g),h=i(296),p=i.n(h),k=i(13),f=i(1),b=i(0),_=i(228),v=i(2),y=i(56),O=i(31),S=i(255),E=i(21),R=i(29),x=i(217),j=i(79),w=function(t){function SetupUsingProxy(t){var i;a()(this,SetupUsingProxy),i=r()(this,d()(SetupUsingProxy).call(this,t));var n=e.googlesitekit.admin,o=n.proxySetupURL,s=n.siteURL,c=e.googlesitekit.setup,l=c.isSiteKitConnected,u=c.isResettable,g=c.errorMessage,m=e.googlesitekit.permissions.canSetup;return i.state={canSetup:m,errorMessage:g,isSiteKitConnected:l,isResettable:u,completeSetup:!1,proxySetupURL:o,resetSuccess:"reset_success"===Object(_.a)(location.href,"notification"),context:Object(_.a)(location.href,"googlesitekit_context"),siteHostname:p.a.toUnicode(new URL(s).hostname)},i}return m()(SetupUsingProxy,t),c()(SetupUsingProxy,[{key:"isSetupFinished",value:function(){var e=this.state,t=e.isSiteKitConnected,i=e.completeSetup;return t&&i}},{key:"render",value:function(){if(this.isSetupFinished()){var t=Object(v.o)("googlesitekit-dashboard",{notification:"authentication_success"});Object(k.delay)((function(){e.location.replace(t)}),500,"later")}var i,o,a,s=this.state,c=s.context,l=s.errorMessage,r=s.isResettable,u=s.proxySetupURL,d=s.resetSuccess,g=s.siteHostname,m=r;return"revoked"===c?(i=Object(b.sprintf)(
/* translators: %s is the site's hostname. (e.g. example.com) */
Object(b.__)("You revoked access to Site Kit for %s","google-site-kit"),g),o=Object(b.__)('Site Kit will no longer have access to your account. If youâ€™d like to reconnect Site Kit, click "Start Setup" below to generate new credentials.',"google-site-kit"),a=Object(b.__)("Sign in with Google","google-site-kit")):m?(i=Object(b.__)("Sign in with Google to configure Site Kit","google-site-kit"),o=Object(b.__)("To use Site Kit, sign in with your Google account. The Site Kit service will guide you through 3 simple steps to complete the connection and configure the plugin.","google-site-kit"),a=Object(b.__)("Sign in with Google","google-site-kit")):(i=Object(b.__)("Sign in with Google to set up Site Kit","google-site-kit"),o=Object(b.__)("The Site Kit service will guide you through 3 simple setup steps.","google-site-kit"),a=Object(b.__)("Start setup","google-site-kit")),n.createElement(f.Fragment,null,n.createElement(y.a,null),l&&n.createElement(R.a,{id:"setup_error",type:"win-error",title:Object(b.__)("Oops! There was a problem during set up. Please try again.","google-site-kit"),description:l,isDismissable:!1}),d&&n.createElement(R.a,{id:"reset_success",title:Object(b.__)("Site Kit by Google was successfully reset.","google-site-kit"),isDismissable:!1}),n.createElement("div",{className:"googlesitekit-wizard"},n.createElement("div",{className:"mdc-layout-grid"},n.createElement("div",{className:"mdc-layout-grid__inner"},n.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},n.createElement(E.a,null,n.createElement("section",{className:"googlesitekit-wizard-progress"},n.createElement("div",{className:"googlesitekit-setup__footer"},n.createElement("div",{className:"mdc-layout-grid"},n.createElement("div",{className:"mdc-layout-grid__inner"},n.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},n.createElement("h1",{className:"googlesitekit-setup__title"},i),n.createElement("p",{className:"googlesitekit-setup__description"},o),n.createElement(j.a,null,(function(e){var t=e.complete,i=e.inProgressFeedback,o=e.CTAFeedback;return n.createElement(f.Fragment,null,o,n.createElement(x.a,{optinAction:"analytics_optin_setup_fallback"}),n.createElement("div",{className:"googlesitekit-start-setup-wrap"},n.createElement(O.a,{className:"googlesitekit-start-setup",href:u,onClick:function(){Object(v.B)("plugin_setup","proxy_start_setup_landing_page")},disabled:!t},a),i,r&&n.createElement(S.a,null)))})))))))))))))}}]),SetupUsingProxy}(f.Component);t.default=w}.call(this,i(16),i(1))}}]);